{"version":3,"sources":["images/unionOk.svg","images/unionErr.svg","utils/Auth.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/PopupWithForm.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/InfoTooltip.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/Api.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","BASE_URL","Header","userData","loggedIn","history","useHistory","pathname","useLocation","className","email","href","onClick","localStorage","removeItem","push","to","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","src","link","alt","name","onCardClick","type","onCardLike","length","onCardDelete","Main","onEditAvatar","onEditProfile","onAddPlace","cards","avatar","about","map","key","Footer","Login","onSubmitClick","handleLogin","useState","setEmail","password","setPassword","escape","require","onSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","status","json","Error","data","token","setItem","catch","err","console","log","Auth","value","onChange","target","placeholder","required","setTimeout","Register","handleRegister","res","Promise","reject","ProtectedRoute","Component","component","PopupWithForm","isOpen","onClose","title","noValidate","children","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","id","autoComplete","EditProfilePopup","onUpdateUser","setName","description","setDescription","useEffect","minLength","maxLength","InfoTooltip","Tooltip","unionOkImg","unionErrImg","AddPlacePopup","imageName","setImageName","imageLink","setImageLink","ImagePopup","handleOriginalResponse","ok","api","url","this","_url","_headers","cardId","authorization","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isInfoTooltipPopupOpen","setInfoTooltipPopupOpen","setloggedIn","setTooltip","selectedCard","setSelectedCard","setCurrentUser","setCards","setUserData","handleSubmitClick","closeAllPopups","tokenCheck","jwt","getItem","Accept","Authorization","promises","getInitialCards","getPersonInfo","all","resCard","resUser","error","Provider","exact","path","removelikeCard","newCard","newCards","c","likeCard","delCard","filter","с","editAvatar","result","sendUserInformation","addNewCard","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.914374f0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/unionOk.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/unionErr.4072126c.svg\";","export const BASE_URL = \"https://auth.nomoreparties.co\";\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => {\n      console.log(email);\n      console.log(password);\n      if (res.status === 400) {\n        throw new Error(\"Некорректно заполнено одно из полей\");\n      } else {\n        return res.json();\n      }\n    })\n    .then((res) => {\n      return res;\n    })\n    .catch((err) => {\n      console.log(err);\n      return Promise.reject(err);\n    });\n};\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((response) => {\n      if (response.status === 200) {\n        return response.json();\n      }\n      if (response.status === 400) {\n        throw new Error(\"Не передано одно из полей\");\n      }\n      if (response.status === 401) {\n        throw new Error(\"Пользователь с email не найден\");\n      }\n    })\n    .then((data) => {\n      if (data.token) {\n        localStorage.setItem(\"jwt\", data.token);\n        return data;\n      }\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  })\n    .then((res) => {\n      if (res.status === 200) {\n        return res.json();\n      }\n      if (res.status === 400) {\n        throw new Error(\"Токен не передан или передан не в том формате\");\n      }\n      if (res.status === 401) {\n        throw new Error(\"Переданный токен некорректен\");\n      }\n    })\n    .then((data) => data);\n};\n","import React from \"react\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\n\nfunction Header({ userData, loggedIn }) {\n  const history = useHistory();\n  const { pathname } = useLocation();\n\n  function signOut() {\n    localStorage.removeItem(\"jwt\");\n    history.push(\"/sign-in\");\n  }\n\n  return (\n    <header className=\"header\">\n      <div className=\"header__logo\"></div>\n      {loggedIn ? (\n        <>\n          {\" \"}\n          <p className=\"header__email-name\">{userData.email}</p>{\" \"}\n          <a\n            href=\"/\"\n            onClick={signOut}\n            className=\"header__link header__link_type_out\"\n          >\n            Выйти\n          </a>{\" \"}\n        </>\n      ) : pathname === \"/sign-in\" ? (\n        <Link to={\"/sign-up\"} className=\"header__link\">\n          Регистрация\n        </Link>\n      ) : (\n        <Link to={\"/sign-in\"} className=\"header__link\">\n          Войти\n        </Link>\n      )}\n    </header>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner._id === currentUser._id;\n\n  const isLiked = props.card.likes.some((i) => i._id === currentUser._id);\n  const cardLikeButtonClassName = `element__button-like ${\n    isLiked ? \"button-like_active\" : \"\"\n  }`;\n\n  function handleClick() {\n    props.onCardClick(props.card);\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n\n  function handleDeleteClick() {\n    props.onCardDelete(props.card);\n  }\n\n  return (\n    <div className=\"element\">\n      <img\n        className=\"element__image\"\n        src={props.card.link}\n        alt={props.card.name}\n        onClick={handleClick}\n      />\n      <div className=\"element__info\">\n        <h4 className=\"element__title\">{props.card.name}</h4>\n        <div className=\"element__place-like\">\n          <button\n            type=\"button\"\n            className={cardLikeButtonClassName}\n            onClick={handleLikeClick}\n          ></button>\n          <span className=\"element__like-count\">{props.card.likes.length}</span>\n        </div>\n      </div>\n      {!isOwn ? null : (\n        <button\n          type=\"button\"\n          className=\"element__remove_image\"\n          onClick={handleDeleteClick}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Card;\n","import React from \"react\";\nimport Card from \"./Card.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Main({\n  onEditAvatar,\n  onEditProfile,\n  onAddPlace,\n  onCardClick,\n  cards,\n  onCardLike,\n  onCardDelete,\n}) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__avatar\" onClick={onEditAvatar}>\n          <img\n            src={currentUser.avatar}\n            alt=\"портрет человека\"\n            className=\"profile__avatar-icon\"\n          />\n        </div>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__title\">{currentUser.name}</h1>\n          <button\n            type=\"button\"\n            className=\"profile__edit-button\"\n            onClick={onEditProfile}\n          ></button>\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\n        </div>\n        <button\n          type=\"button\"\n          className=\"button_add-card\"\n          onClick={onAddPlace}\n        ></button>\n      </section>\n      <section className=\"elements\">\n        {cards.map((card) => (\n          <Card\n            card={card}\n            onCardClick={onCardClick}\n            onCardLike={onCardLike}\n            onCardDelete={onCardDelete}\n            key={card._id}\n          />\n        ))}\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from \"react\";\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport * as Auth from \"../utils/Auth.js\";\n\nfunction Login({ onSubmitClick, handleLogin }) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const history = useHistory();\n  const escape = require(\"escape-html\");\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value);\n  }\n\n  function submitClick() {\n    setTimeout(onSubmitClick, 1000);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    if (!email || !password) {\n      return;\n    }\n\n    Auth.authorize(escape(email), escape(password))\n      .then((data) => {\n        if (data.token) {\n          handleLogin();\n          history.push(\"/\");\n        }\n      })\n      .catch((err) => console.log(err));\n  }\n\n  return (\n    <div className=\"login\">\n      <h3 className=\"login__title\">Вход</h3>\n      <form onSubmit={handleSubmit} className=\"login__form\">\n        <fieldset className=\"login__form-set\">\n          <input\n            type=\"email\"\n            name=\"email\"\n            value={email}\n            onChange={handleChangeEmail}\n            placeholder=\"Email\"\n            className=\"login__form-text login__form-text_type_title\"\n            required\n          />\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            onChange={handleChangePassword}\n            placeholder=\"Пароль\"\n            className=\"login__form-text login__form-text_type_password\"\n            required\n          />\n          <input\n            type=\"submit\"\n            value=\"Войти\"\n            onClick={submitClick}\n            className=\"login__form-submit\"\n          />\n        </fieldset>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n","import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport * as Auth from \"../utils/Auth.js\";\n\nfunction Register({ onSubmitClick, handleRegister }) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const history = useHistory();\n  const escape = require(\"escape-html\");\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value);\n  }\n\n  function submitClick() {\n    setTimeout(onSubmitClick, 500);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    Auth.register(escape(email), escape(password))\n      .then((res) => {\n        if (res) {\n          handleRegister();\n          history.push(\"/sign-in\");\n        } else {\n          throw new Error(\"Что-то пошло не так!\");\n        }\n      })\n      .catch((err) => {\n        console.log(`Ошибка регистрации пользователя: ${err}`);\n      });\n  }\n\n  return (\n    <div className=\"login\">\n      <h3 className=\"login__title\">Регистрация</h3>\n      <form onSubmit={handleSubmit} className=\"login__form\">\n        <fieldset className=\"login__form-set\">\n          <input\n            type=\"email\"\n            name=\"email\"\n            value={email}\n            placeholder=\"Email\"\n            onChange={handleChangeEmail}\n            className=\"login__form-text login__form-text_type_title\"\n            required\n          />\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            placeholder=\"Пароль\"\n            onChange={handleChangePassword}\n            className=\"login__form-text login__form-text_type_password\"\n            required\n          />\n          <input\n            type=\"submit\"\n            onClick={submitClick}\n            value=\"Зарегистрироваться\"\n            className=\"login__form-submit\"\n          />\n        </fieldset>\n      </form>\n      <div className=\"login__signup\">\n        <p className=\"login__signup-text\">Уже зарегистрированы?</p>\n        <Link to=\"/sign-in\" className=\"login__signup-link\">\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default Register;\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","import React from \"react\";\n\nfunction PopupWithForm(props) {\n  return (\n    <section\n      className={\n        props.isOpen\n          ? `popup popup_opened popup_type_${props.name}`\n          : `popup popup_type_${props.name}`\n      }\n    >\n      <div className={`popup__container popup__container_type_${props.name}`}>\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          onClick={props.onClose}\n        ></button>\n        <h3 className={`popup__title popup__title_type_${props.name}`}>\n          {props.title}\n        </h3>\n        <form\n          className=\"popup__form\"\n          name={props.name}\n          onSubmit={props.onSubmit}\n          noValidate\n        >\n          <fieldset className=\"popup__form-set\">{props.children}</fieldset>\n        </form>\n      </div>\n    </section>\n  );\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const avatarRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      title=\"Обновить аватар\"\n      name=\"edit-avatar\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        type=\"url\"\n        name=\"link\"\n        placeholder=\"Ссылка на картинку\"\n        ref={avatarRef}\n        className=\"popup__form-text popup__form-text_type_link\"\n        id=\"url-input\"\n        autoComplete=\"off\"\n        required\n      />\n      <span className=\"popup__form-text-error\" id=\"url-input-error\"></span>\n      <input\n        type=\"submit\"\n        value=\"Сохранить\"\n        className=\"popup__form-submit popup__form-submit_type_edit-avatar\"\n      />\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const [name, setName] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      title=\"Редактировать профиль\"\n      name=\"edit-profile\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        type=\"text\"\n        name=\"name\"\n        value={name || \"\"}\n        onChange={handleChangeName}\n        className=\"popup__form-text popup__form-text_type_name\"\n        id=\"name-input\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        autoComplete=\"off\"\n        required\n      />\n      <span className=\"popup__form-text-error\" id=\"name-input-error\"></span>\n      <input\n        type=\"text\"\n        name=\"job\"\n        value={description || \"\"}\n        onChange={handleChangeDescription}\n        className=\"popup__form-text popup__form-text_type_job\"\n        id=\"job-input\"\n        minLength=\"2\"\n        maxLength=\"200\"\n        autoComplete=\"off\"\n        required\n      />\n      <span className=\"popup__form-text-error\" id=\"job-input-error\"></span>\n      <input type=\"submit\" value=\"Сохранить\" className=\"popup__form-submit\" />\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport unionOkImg from \"../images/unionOk.svg\";\nimport unionErrImg from \"../images/unionErr.svg\";\n\nfunction InfoTooltip({ isOpen, onClose, Tooltip }) {\n  return (\n    <PopupWithForm name=\"tool-tip\" isOpen={isOpen} onClose={onClose}>\n      <img\n        src={!Tooltip ? unionErrImg : unionOkImg}\n        alt=\"лого авторизации\"\n        className=\"popup__notice-logo\"\n      />\n      {!Tooltip ? (\n        <span className=\"popup__notice-text\">\n          Что-то пошло не так! Попробуйте ещё раз.\n        </span>\n      ) : (\n        <span className=\"popup__notice-text\">\n          Вы успешно зарегистрировались!\n        </span>\n      )}\n    </PopupWithForm>\n  );\n}\n\nexport default InfoTooltip;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\n  AddPlacePopup.propTypes = {\n    isOpen: PropTypes.bool,\n    onClose: PropTypes.func.isRequired,\n    onAddPlace: PropTypes.func.isRequired,\n  };\n\n  const [imageName, setImageName] = React.useState(\"\");\n  const [imageLink, setImageLink] = React.useState(\"\");\n\n  function handleChangeimageName(e) {\n    setImageName(e.target.value);\n  }\n\n  function handleChangeimageLink(e) {\n    setImageLink(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onAddPlace({\n      imageName,\n      imageLink,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      title=\"Новое место\"\n      name=\"add-card\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        type=\"text\"\n        name=\"title\"\n        value={imageName}\n        placeholder=\"Название\"\n        onChange={handleChangeimageName}\n        className=\"popup__form-text popup__form-text_type_title\"\n        id=\"title-input\"\n        minLength=\"1\"\n        maxLength=\"30\"\n        autoComplete=\"off\"\n        required\n      />\n      <span className=\"popup__form-text-error\" id=\"title-input-error\"></span>\n      <input\n        type=\"url\"\n        name=\"link\"\n        value={imageLink}\n        placeholder=\"Ссылка на картинку\"\n        onChange={handleChangeimageLink}\n        className=\"popup__form-text popup__form-text_type_link\"\n        id=\"url-input\"\n        autoComplete=\"off\"\n        required\n      />\n      <span className=\"popup__form-text-error\" id=\"url-input-error\"></span>\n      <input\n        type=\"submit\"\n        value=\"Создать\"\n        className=\"popup__form-submit popup__form-submit_type_add-card\"\n      />\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","import React from \"react\";\n\nfunction ImagePopup(props) {\n  return (\n    <section\n      className={\n        props.card.isOpen\n          ? `popup popup_opened popup_type_full-image`\n          : `popup popup_type_full-image`\n      }\n    >\n      <div className=\"popup__container popup__container_type_full-image\">\n        <img\n          className=\"popup__full-image\"\n          src={props.card.card.link}\n          alt={props.card.card.name}\n        />\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          onClick={props.onClose}\n        ></button>\n        <h3 className=\"popup__title popup__title_type_full-image\">\n          {props.card.card.name}\n        </h3>\n      </div>\n    </section>\n  );\n}\n\nexport default ImagePopup;\n","const handleOriginalResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n\n  return Promise.reject(`Ошибка: ${res.status}`);\n};\n\nclass Api {\n  constructor({ url, headers }) {\n    this._url = url;\n    this._headers = headers;\n  }\n\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      method: \"GET\",\n      headers: this._headers,\n    }).then(handleOriginalResponse);\n  }\n\n  getPersonInfo() {\n    return fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      headers: this._headers,\n    }).then(handleOriginalResponse);\n  }\n\n  sendUserInformation(data) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about,\n      }),\n    }).then(handleOriginalResponse);\n  }\n\n  addNewCard(data) {\n    return fetch(`${this._url}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link,\n      }),\n    }).then(handleOriginalResponse);\n  }\n\n  delCard(cardId) {\n    return fetch(`${this._url}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then(handleOriginalResponse);\n  }\n\n  likeCard(cardId) {\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: \"PUT\",\n      headers: this._headers,\n    }).then(handleOriginalResponse);\n  }\n\n  removelikeCard(cardId) {\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then(handleOriginalResponse);\n  }\n\n  editAvatar(data) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.avatar,\n      }),\n    }).then(handleOriginalResponse);\n  }\n}\n\nconst api = new Api({\n  url: \"https://mesto.nomoreparties.co/v1/cohort-15\",\n  headers: {\n    authorization: \"71f3852f-9196-47d1-bd3b-fa85f23dbdb4\",\n    \"Content-Type\": \"application/json\",\n  },\n});\nexport default api;\n","import React from \"react\";\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport * as Auth from \"../utils/Auth.js\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ImagePopup from \"./ImagePopup.js\";\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(\n    false\n  );\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(\n    false\n  );\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setInfoTooltipPopupOpen] = React.useState(\n    false\n  );\n  const [loggedIn, setloggedIn] = React.useState(false);\n  const [Tooltip, setTooltip] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({\n    card: {},\n    isOpen: false,\n  });\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [userData, setUserData] = React.useState(\"\");\n  const history = useHistory();\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  React.useEffect(() => {\n    const promises = [api.getInitialCards(), api.getPersonInfo()];\n\n    Promise.all(promises)\n      .then(([resCard, resUser]) => {\n        setCurrentUser(resUser);\n        setCards(resCard);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleSubmitClick() {\n    setInfoTooltipPopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard({ card, isOpen: true });\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setInfoTooltipPopupOpen(false);\n    setSelectedCard({ ...selectedCard, isOpen: false });\n  }\n\n  function handleUpdateUser(data) {\n    api\n      .sendUserInformation({ name: data.name, about: data.about })\n      .then((result) => {\n        setCurrentUser(result);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateAvatar(data) {\n    api\n      .editAvatar({ avatar: data.avatar })\n      .then((result) => {\n        setCurrentUser(result);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n\n    if (!isLiked) {\n      api\n        .likeCard(card._id, !isLiked)\n        .then((newCard) => {\n          const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n          setCards(newCards);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      api\n        .removelikeCard(card._id, isLiked)\n        .then((newCard) => {\n          const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n          setCards(newCards);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }\n\n  function handleCardDelete(card) {\n    api\n      .delCard(card._id)\n      .then(() => {\n        const newCards = cards.filter((с) => с._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api\n      .addNewCard({ name: data.imageName, link: data.imageLink })\n      .then((newCard) => {\n        setCards([...cards, newCard]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function tokenCheck() {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      Auth.getContent(jwt).then((res) => {\n        if (res) {\n          setUserData({\n            email: res.data.email,\n          });\n          setloggedIn(true);\n          history.push(\"/\");\n        } else {\n          localStorage.removeItem(\"jwt\");\n        }\n      });\n    }\n  }\n\n  function handleLogin() {\n    setTooltip(true);\n    tokenCheck();\n  }\n\n  function handleRegister() {\n    setTooltip(true);\n  }\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header loggedIn={loggedIn} userData={userData} />\n        <Switch>\n          <ProtectedRoute\n            exact\n            path=\"/\"\n            loggedIn={loggedIn}\n            component={Main}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          />\n          <Route path=\"/sign-up\">\n            <Register\n              onSubmitClick={handleSubmitClick}\n              handleRegister={handleRegister}\n            />\n          </Route>\n          <Route path=\"/sign-in\">\n            <Login\n              onSubmitClick={handleSubmitClick}\n              handleLogin={handleLogin}\n              Tooltip={Tooltip}\n            />\n          </Route>\n          <Route>\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n          </Route>\n        </Switch>\n        <Footer />\n        <InfoTooltip\n          isOpen={isInfoTooltipPopupOpen}\n          onClose={closeAllPopups}\n          Tooltip={Tooltip}\n          loggedIn={loggedIn}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}